<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS 레이아웃과 동적 스타일링</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            line-height: 1.6;
            margin: 0 auto;
            max-width: 900px;
            padding: 20px;
            color: #333;
        }
        h1, h2, h3 {
            color: #222;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        }
        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .container {
            padding: 20px;
        }
        .section {
            margin-bottom: 40px;
        }
        .example {
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            margin-top: 20px;
        }
        
        /* Position Example Styles */
        .position-box {
            width: 100px;
            height: 100px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        .static { background-color: #6c757d; }
        .relative { background-color: #007bff; }
        .absolute { background-color: #28a745; position: absolute; top: 10px; right: 10px; }
        .fixed { background-color: #dc3545; position: fixed; bottom: 20px; right: 20px; z-index: 1000; }
        .sticky { background-color: #ffc107; color: #333; position: sticky; top: 0; }
        .relative-container {
            position: relative;
            height: 150px;
            background-color: #f0f0f0;
            border: 2px dashed #ccc;
            margin-top: 10px;
        }

        /* API Loading Example Styles */
        #user-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .user-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        .user-card:hover {
            transform: translateY(-5px);
        }
        .user-card h4 {
            margin: 0 0 10px;
            color: #007bff;
        }
        .loader {
            border: 8px solid #f3f3f3;
            border-top: 8px solid #3498db;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>CSS 레이아웃과 동적 스타일링</h1>

        <!-- Position Section -->
        <section id="position-section" class="section">
            <h2>CSS <code>position</code> 속성</h2>
            <p><code>position</code> 속성은 문서 상에 요소를 배치하는 방법을 지정합니다. <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code> 속성과 함께 사용하여 최종 위치를 결정합니다.</p>

            <div class="example">
                <h3>Position 예제</h3>
                <div class="position-box static">static</div>
                <div class="relative-container">
                    <div class="position-box relative">relative</div>
                    <div class="position-box absolute">absolute</div>
                </div>
                <div class="position-box sticky">sticky</div>
                <div class="fixed position-box">fixed</div>
                <p style="height: 500px; margin-top: 20px;">(스크롤을 내려 sticky와 fixed 동작을 확인하세요)</p>
            </div>
            
            <h3>주요 Position 값</h3>
            <ul>
                <li><strong>static:</strong> 기본값. 일반적인 문서 흐름에 따라 배치됩니다.</li>
                <li><strong>relative:</strong> 일반적인 문서 흐름에 따라 배치되지만, <code>top</code>, <code>left</code> 등으로 원래 위치를 기준으로 상대적 이동이 가능합니다. <code>absolute</code> 자식 요소의 기준점이 될 수 있습니다.</li>
                <li><strong>absolute:</strong> 가장 가까운 <code>position</code>이 <code>static</code>이 아닌 부모 요소를 기준으로 배치됩니다. 만약 기준이 될 부모가 없다면 초기 컨테이닝 블록(보통 <code>&lt;body&gt;</code>)을 기준으로 합니다.</li>
                <li><strong>fixed:</strong> 뷰포트(viewport, 브라우저 창)를 기준으로 배치됩니다. 스크롤을 해도 항상 같은 위치에 고정됩니다.</li>
                <li><strong>sticky:</strong> 일반적인 흐름에 따라 배치되다가, 스크롤 위치가 특정 지점에 도달하면 <code>fixed</code>처럼 동작합니다.</li>
            </ul>
        </section>

        <!-- API Data Loading Section -->
        <section id="api-loading-section" class="section">
            <h2>API 데이터 로딩과 스타일링</h2>
            <p>JavaScript로 API를 호출하여 데이터를 동적으로 불러올 때, 사용자 경험을 위해 로딩 상태를 표시하고 콘텐츠가 자연스럽게 나타나도록 스타일을 제어하는 것이 중요합니다.</p>

            <div class="example">
                <h3>사용자 목록 불러오기 예제</h3>
                <button id="load-users-btn">사용자 목록 불러오기</button>
                <div id="user-list-container">
                    <!-- 로더 또는 사용자 목록이 여기에 표시됩니다. -->
                </div>
            </div>

            <h4>예제 시나리오</h4>
            <ol>
                <li>"사용자 목록 불러오기" 버튼을 클릭합니다.</li>
                <li>데이터를 가져오는 동안 로딩 스피너가 표시됩니다.</li>
                <li>데이터 로딩이 완료되면, 스피너는 사라지고 사용자 목록이 카드 형태로 표시됩니다.</li>
            </ol>

            <h4>주요 코드 (HTML & JavaScript)</h4>
            <pre><code>&lt;!-- HTML --&gt;
&lt;button id="load-users-btn"&gt;사용자 목록 불러오기&lt;/button&gt;
&lt;div id="user-list-container"&gt;&lt;/div&gt;

&lt;!-- JavaScript --&gt;
&lt;script&gt;
    const loadBtn = document.getElementById('load-users-btn');
    const container = document.getElementById('user-list-container');

    loadBtn.addEventListener('click', () => {
        // 1. 로딩 상태 표시
        container.innerHTML = '<div class="loader"></div>';

        // 2. API 호출 (예: JSONPlaceholder)
        fetch('https://jsonplaceholder.typicode.com/users')
            .then(response => response.json())
            .then(users => {
                // 3. 로딩 완료 후 콘텐츠 표시
                container.innerHTML = ''; // 로더 제거
                const userList = document.createElement('div');
                userList.id = 'user-list';
                
                users.forEach(user => {
                    const card = document.createElement('div');
                    card.className = 'user-card';
                    card.innerHTML = `
                        &lt;h4&gt;${user.name}&lt;/h4&gt;
                        &lt;p&gt;Email: ${user.email}&lt;/p&gt;
                        &lt;p&gt;Website: ${user.website}&lt;/p&gt;
                    `;
                    userList.appendChild(card);
                });
                container.appendChild(userList);
            })
            .catch(error => {
                container.innerHTML = '<p>데이터를 불러오는 데 실패했습니다.</p>';
                console.error(error);
            });
    });
&lt;/script&gt;
            </code></pre>
        </section>
    </div>

    <script>
        const loadBtn = document.getElementById('load-users-btn');
        const container = document.getElementById('user-list-container');

        loadBtn.addEventListener('click', () => {
            container.innerHTML = '<div class="loader"></div>';

            fetch('https://jsonplaceholder.typicode.com/users')
                .then(response => response.json().then(data => ({ ok: response.ok, data })))
                .then(({ ok, data }) => {
                    if (!ok) throw new Error('Failed to fetch');
                    
                    container.innerHTML = '';
                    const userList = document.createElement('div');
                    userList.id = 'user-list';
                    
                    data.forEach(user => {
                        const card = document.createElement('div');
                        card.className = 'user-card';
                        card.innerHTML = `
                            <h4>${user.name}</h4>
                            <p>Email: ${user.email}</p>
                            <p>Website: ${user.website}</p>
                        `;
                        userList.appendChild(card);
                    });
                    container.appendChild(userList);
                })
                .catch(error => {
                    container.innerHTML = '<p style="color: red;">데이터를 불러오는 데 실패했습니다.</p>';
                    console.error('Fetch error:', error);
                });
        });
    </script>

</body>
</html>
